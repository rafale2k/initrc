name: macOS Install Test

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test-macos:
    runs-on: macos-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          submodules: recursive

      - name: Run install.sh
        run: |
          chmod +x install.sh
          # CIãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã¦å®Ÿè¡Œ
          CI=true ./install.sh

      - name: Verify installation
        run: |
          # Homebrew ã¨è‡ªä½œ bin ã®ãƒ‘ã‚¹ã‚’ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚‚é€šã™
          export PATH="/usr/local/bin:/opt/homebrew/bin:$HOME/.local/bin:$PATH"
          
          echo "ğŸ” Checking installed tools..."
          # ã‚³ãƒãƒ³ãƒ‰ãŒå­˜åœ¨ã™ã‚‹ã‹ã€ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ã‚‹ã‹ã‚’ç¢ºèª
          which zsh || echo "zsh not found"
          which bat || which batcat || echo "bat not found"
          which fd || echo "fd not found"
          
          # ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨ç¤ºã§æ­£å¸¸å‹•ä½œã‚’ç¢ºèª
          zsh --version
          
          echo "âœ… All tools verified."
